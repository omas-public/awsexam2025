手順書
・ログインする
１．「AWS マネジメントコンソール」を検索する
２．「rootユーザー」or「IAMユーザー」でログインする


・VPC作成
１．ログイン後、検索欄から「VPC」を検索する
２．リージョンを設定する(右上にあるアカウントの左隣をクリック！)
　※アジアパシフィック(東京)を選択
３．「お使いのVPC」をクリックし、左上の「VPCを作成」をクリック
　◯設定◯
	・作成するリソース：VPCのみ
	・名前タグ：my-vpc(ここでは)
	・IPv4 CIDR：192.168.10.0/24
	※あとは変更しない※
４．「VPCを作成」をクリック


・VPCをサブネットに分割
[パブリックサブネットの作成]
１．左の「サブネット」をクリックし、右上の「サブネットを作成」をクリック
　◯設定◯
	・VPC ID：作成したVPC(今回はmy-vpc)
	・サブネット名：パブリックサブネット
	・IPv4 サブネット CIDR ブロック：10.0.0.0/27
	※あとは変更しない※
２．「サブネットを作成」をクリック


・回線
１．「インターネットゲートウェイ」をクリックし、「インターネットゲートウェイの作成」をクリック
　◯設定◯
	・名前タグ：gateway
	※あとは変更しない※
２．「インターネットゲートウェイの作成」をクリック


・VPCを結ぶ
１．さっき作ったインターネットゲートウェイ[gateway]にチェックをつけ、「アクション」→「VPCにアタッチ」をクリック
２．最初に作ったVPC[my-vpc]を選択し、「インターネットゲートウェイのアタッチ」をクリック


・ルートテーブル設定
１．「サブネット」をクリックし、確認したいサブネット(今回はパブリックサブネット)にチェックをつける
２．[詳細]の[ルートテーブル]の値を確認
３．「ルートテーブル」をクリックし、２のルートテーブルIDと一致するルートテーブルにチェックをつける
４．[ルートタブ]をクリックし、設定値を確認する


・ルートテーブル作成
１．「ルートテーブルを作成」をクリックし設定する
　◯設定◯
　	・名前：パブリックルートテーブル
　	・VPC：[my-vpc]を選択
　	※あとは変更しない※
２．「ルートテーブルを作成」をクリック
３．２で作った[パブリックルートテーブル]にチェックをつけ、下の[サブネットの関連付け]をクリックし、[サブネットの関連付けを編集]をクリックする
４．[利用可能なサブネット：パブリックサブネット]を選択し、「関連付けを保存」をクリック
５．そのまま左の[ルート]をクリックし、[ルートを編集]をクリックして「ルートを追加」を押す
　◯設定◯
　	・送信先：0.0.0.0/0
　	・ターゲット：[インターネットゲートウェイ]を選択し、作成したインターネットゲートウェイ(gateway)を選択
６．「変更を保存」をクリックして保存
７．左の「サブネット」をクリックし、[パブリックサブネット]にチェックをつけ、下の[ルートテーブル]をクリックして作成したパブリックルートテーブルになっているか、そして0.0.0.0/0がインターネットゲートウェイに設定されたか確認


・WEBサーバー作成
１．検索欄から「EC2」を検索
２．左の「インスタンス」をクリックし、「インスタンスを起動」をクリック
　◯設定◯
　	・名前：WEBサーバー
　	・アプリケーション及びOSイメージ：AmazonLinux / AmazonLinux 2023 AMIを選択
　	・インスタンスタイプ：t2.micro
　	・キーペア：my-key[タイプ：RSA、プライベートキーファイル形式：.pem]
	・ネットワーク設定：
		[VPC]my-vpc
		[サブネット]パブリックサブネット
		[パブリックIPの自動割り当て]有効化
		[ファイアウォール]セキュリティグループを作成する
		[セキュリティグループ名]WEB-SG
		セキュリティグループルール[タイプ]sshか確認
		高度なネットワーク設定[プライマリIP]10.0.0.10
	※あとは変更しない※
３．「インスタンスを起動」をクリックして、「すべてのインスタンスを表示」をクリックでインスタンス一覧にもどる


・SSH接続
１．ターミナルで「ssh -i my-key.pem ec2-user@[WEBサーバーのパブリックIPv4アドレス]」を打つ
２．ターミナルで「chmod 400 my-key.pem」と打って権限を変更する
３．yesと入力して[Enter]をクリック
４．ターミナルで「sudo lsof -i -n -P」と入力してポート番号とプログラムを確認


・セキュリティグループ設定
１．左の「セキュリティグループ」をクリックし、セキュリティグループの「WEB-SG」をクリック
２．[インバウンドルール]をクリックし、ポート22しかないことを確認


・踏み台サーバー作成
１．左の「インスタンス」をクリックし、「インスタンスを起動」をクリック
　◯設定◯
　	・名前：踏み台サーバー
　	・アプリケーション及びOSイメージ：AmazonLinux / AmazonLinux 2023 AMIを選択
　	・インスタンスタイプ：t2.micro
　	・キーペア：my-key[タイプ：RSA、プライベートキーファイル形式：.pem]
	・ネットワーク設定：(右の編集をクリック)
		[VPC]my-vpc
		[サブネット]パブリックサブネット
		[パブリックIPの自動割り当て]有効化
		[ファイアウォール]セキュリティグループを作成する
		[セキュリティグループ名]proxy-SG
		セキュリティグループルール[タイプ]sshか確認
		高度なネットワーク設定[プライマリIP]10.0.0.11
	※あとは変更しない※
２．「インスタンスを起動」をクリックして、「すべてのインスタンスを表示」をクリックでインスタンス一覧にもどる
３．ターミナルで「ssh -i my-key.pem ec2-user@[踏み台サーバーのパブリックIPv4アドレス]」を打つ


・インストール
１．ターミナルで「sudo dnf -y install httpd」と打って実行
２．ターミナルで「sudo systemctl start httpd.service」と打って実行
３．ターミナルで「sudo systemctl enable httpd.service」と打って実行


・WEBサーバーに接続
１．左の「インスタンス」をクリックし、「WEBサーバー」にチェックをつける
２．パブリックIPv4アドレスにアクセスする(隣の「オープンアドレス」をクリック)
３．左の「セキュリティグループ」をクリックし、セキュリティグループの「WEB-SG」をクリック
４．[インバウンドルール]をクリックし、右の[インバウンドのルールを編集]をクリックして「ルールを追加」を押す
　◯設定◯
　	・タイプ：カスタムTCP
　	・ポート範囲：80
　	・ソース：0.0.0.0/0
５．「ルールを保存」をクリック
６．WEBブラウザに移動し、「https://」のｓを削除すると「It works!」と表示される


・DNSサーバーを構成
１．検索欄から「VPC」を検索
２．左の「お使いのVPC」をクリックし、「my-vpc」にチェックをつける
３．右上の「アクション」をクリックし、「VPCの設定を編集」をクリック
４．DNS設定の「DNSホスト名を有効化」にチェックをつけて「保存」をクリック
５．検索欄から「EC2」を検索
６．左の「インスタンス」をクリックし、「WEBサーバー」にチェックをつけて「パブリックDNS」からWEBブラウザに移動
７．「https://」のｓを削除すると「It works!」と表示される


・プライベートサブネット作成
１．検索欄から「VPC」を検索
２．「サブネット」をクリックし、右上の「サブネットを作成」をクリック(2つ作る)
　◯設定１◯
　	・VPC ID：my-vpc
　	・サブネット名：プライベートサブネット1
　	・アベイラビリティゾーン：あるものを選択
　◯設定２◯
　	・VPC ID：my-vpc
　	・サブネット名：プライベートサブネット2
　	・アベイラビリティゾーン：あるものを選択(1と被らない数字)
３．検索欄から「EC2」を検索


・RDS作成
１．左上のナビゲーションペイン(9このまる)から「データベース」→「RDS」を選択
２．右上でリージョン設定をする(東京)
３.左の「サブネットグループ」を選択し、「DBサブネットグループを作成」をクリック
　◯設定◯
　	・名前：RDS-subnet-group
　	・説明：RDS
　	・VPC：my-vpc
　	[サブネット追加]
　	・アベイラビリティゾーン：作ったサブネットと一致するAZ
　	・サブネット：プライベートサブネット1、プライベートサブネット2
４．「作成」ボタンを押す
５.左の「データベース」をクリックし、「データベースを作成する」をクリック
　◯設定◯
　	・データベース作成方法を選択：標準作成
　	・エンジンのタイプ：MySQL
　	・テンプレート：無料利用枠
　	[設定]
　	・DBインスタンス識別子：database01
　	・マスターユーザー名：n24010
　	・マスターパスワード：hogehoge_AWS2025
　	[ストレージ]
　	そのままの設定
　	[接続]
　	・VPC：my-vpc
　	・DBサブネットグループ：rds-dubnet-group
　	・パブリックアクセス：なし
　	・VPCセキュリティグループ(ファイアウォール)：新規作成
　	[追加設定]
　	・最初のデータベース名：RDS
　	※あとは変更しない※
６．「データベースの作成」をクリック


・SQLクライアントをダウンロード
１．リンク先に移動する[https://dev.mysql.com/downloads/workbench/]
２．OSを選択して(ubuntu)バージョンを合わせてダウンロードする


・MySQLデータベースに接続
１．ダウンロードからMySQL Workbenchをインストールして起動する
２．上の[データベース]の[データベースに接続]を選択
　◯設定◯
　	・Hostname：127.0.0.1
　	・username：n24010
　	・password：hogehoge_AWS2025
３．「OK」ボタンを押す


・Wordpressに接続
１．検索欄から「EC2」を検索
２．「セキュリティグループ」の[WEB-SG]を選択してインバウンドのルールを編集する
　◯設定◯
　	・タイプ：MySQL/Aurora
　	・ソース：0.0.0.0/0
３．インストールする
　・ssh -i my-key.pem ec2-user@3.112.109.155
　・scp -i my-key.pem my-key.pem ec2-user@[パブリック IPv4 アドレス]:~/
　・ssh -i my-key.pem ec2-user@13.231.250.69
　・sudo yum update -y
　・sudo yum install -y httpd php php-mysqlnd mariadb
　・cd /var/www/html
　・sudo wget https://ja.wordpress.org/latest-ja.tar.gz
　・sudo tar -xvzf latest-ja.tar.gz
　・sudo mv wordpress/* .
　・sudo rm -rf wordpress latest-ja.tar.gz
　・sudo chown -R apache:apache /var/www/html
　・sudo systemctl start httpd
　・sudo systemctl enable httpd

