# AWS 基礎からのネットワーク＆サーバー構築（第2章〜第8章）

## VPC設計とIPアドレス方針

* VPC CIDR：`192.168.10.0/24`
* これを\*\*8分割（/27）\*\*し、4つのサブネットを使用：

| サブネット名         | 用途        | CIDR              |
| -------------- | --------- | ----------------- |
| PublicSubnet1  | 踏み台サーバ用   | 192.168.10.32/27  |
| PublicSubnet2  | Webサーバ用   | 192.168.10.64/27  |
| PrivateSubnet1 | RDS（DB）用1 | 192.168.10.96/27  |
| PrivateSubnet2 | RDS（DB）用2 | 192.168.10.128/27 |

---

## 第2章：VPC（仮想ネットワーク）の構築

1. VPC作成

   * CIDR：192.168.10.0/24
   * 名前タグ：exam-vpc

2. ネームタグ付きサブネットを4つ作成

   * PublicSubnet1: 192.168.10.32/27（ap-northeast-1a）
   * PublicSubnet2: 192.168.10.64/27（ap-northeast-1c）
   * PrivateSubnet1: 192.168.10.96/27（ap-northeast-1a）
   * PrivateSubnet2: 192.168.10.128/27（ap-northeast-1c）

---

## 第3章：ルートテーブルとIGW設定

1. インターネットゲートウェイ作成

   * 名前：exam-igw
   * VPCにアタッチ

2. パブリック用ルートテーブル作成

   * 名前：public-rt
   * サブネット関連付け：PublicSubnet1, PublicSubnet2
   * ルート追加：

     * `0.0.0.0/0` → `igw` をターゲット

3. プライベート用ルートテーブル作成（必要ならNAT接続）

   * 名前：private-rt
   * 関連付け：PrivateSubnet1, PrivateSubnet2
   * RDSのみ使用なら NAT は不要

---

## 第4章：EC2の起動と接続

1. 踏み台サーバ用EC2（PublicSubnet1）

   * Amazon Linux 2、t2.micro
   * パブリックIP割当：有効
   * セキュリティグループ（SSH：自分のIP）

2. Webサーバ用EC2（PublicSubnet2）

   * 同様に作成
   * HTTP（80）許可

3. キーペア作成（exam-key）し、秘密鍵をダウンロード

4. SSH接続確認（踏み台 → Webサーバ）

---

## 第5章：セキュリティグループとキーペア

* 踏み台SG：SSH（ポート22）自宅IPから許可
* WebサーバSG：80番（全世界）、22番（踏み台SGから）
* DBサーバSG：3306番（WebサーバSGからのみ）

---

## 第6章：ELBの導入

1. アプリケーションロードバランサ（ALB）作成

   * サブネット：PublicSubnet1 & PublicSubnet2
   * リスナー：HTTP（ポート80）
   * ターゲットグループ：WebサーバEC2

2. 動作確認：ALBのDNSでWordPress画面表示

---

## 第7章：RDSの構築

1. RDS（MySQL）作成

   * サブネットグループ：PrivateSubnet1, PrivateSubnet2
   * セキュリティグループ：Webサーバからのアクセス許可
   * マルチAZ：必要なら有効

2. 接続確認

   * WebサーバEC2 から mysql コマンドで確認

---

## 第8章：WordPressの導入

1. WebサーバにApache、PHP、WordPressインストール
2. DB設定：wp-config.php にRDSのエンドポイント入力
3. パーミッション設定と起動確認
4. ALBのDNSアクセスでWordPress初期画面表示

---

## 提出物（問5対応）

* `学籍番号.md` に手順と設定内容
* `学籍番号.png` にWordPress画面のスクリーンショット
